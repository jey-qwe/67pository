from gemma_analyzer import analyze_job
import json

# üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤

TEST_JOBS = [
    {
        "name": "Python Automation",
        "description": """
        –¢—Ä–µ–±—É–µ—Ç—Å—è Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö.
        –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å 10+ —Å–∞–π—Ç–æ–≤,
        –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ Excel.
        –ë—é–¥–∂–µ—Ç: $150-300. –°—Ä–æ–∫: 3-5 –¥–Ω–µ–π.
        """
    },
    {
        "name": "VFX Motion Graphics",
        "description": """
        –ò—â—É After Effects —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è kinetic typography –∞–Ω–∏–º–∞—Ü–∏–∏.
        –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 30 —Å–µ–∫—É–Ω–¥. –ù—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ transitions.
        –ü–ª–∞—Ç–∏–º $200-400. –°—Ä–æ—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç!
        """
    },
    {
        "name": "Telegram Bot",
        "description": """
        –ù—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ–π Telegram –±–æ—Ç –Ω–∞ Python.
        –§—É–Ω–∫—Ü–∏–∏: –ø—Ä–∏—ë–º –∫–æ–º–∞–Ω–¥, –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite.
        –ë—é–¥–∂–µ—Ç: $80-120. Deadline: 2 –¥–Ω—è.
        """
    },
    {
        "name": "Website Design",
        "description": """
        –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ–±-–¥–∏–∑–∞–π–Ω–µ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–µ–Ω–¥–∏–Ω–≥–∞ –Ω–∞ WordPress.
        –ù—É–∂–µ–Ω —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω, –∞–¥–∞–ø—Ç–∏–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM.
        –ë—é–¥–∂–µ—Ç: $500-800. –°—Ä–æ–∫: 2 –Ω–µ–¥–µ–ª–∏.
        """
    },
    {
        "name": "Discord Bot + Scraper",
        "description": """
        –°–æ–∑–¥–∞—Ç—å Discord –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–∞—Ä—Å–∏—Ç—å RSS —Ñ–∏–¥—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–æ–≤–æ—Å—Ç–∏.
        Python + discord.py + feedparser.
        –ü–ª–∞—Ç–∏–º $100. –°—Ä–æ—á–Ω–æ –Ω—É–∂–Ω–æ!
        """
    }
]


def run_tests():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –Ω–∞ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –≤–∞–∫–∞–Ω—Å–∏–π"""
    print("="*60)
    print("üî¨ [–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï] AI Sales Agent ‚Äî –ú–æ–¥—É–ª—å '–Ø–¥—Ä–æ'")
    print("="*60 + "\n")
    
    results = []
    
    for idx, job in enumerate(TEST_JOBS, 1):
        print(f"\n{'‚îÄ'*60}")
        print(f"üìã –í–ê–ö–ê–ù–°–ò–Ø #{idx}: {job['name']}")
        print(f"{'‚îÄ'*60}")
        print(f"–û–ø–∏—Å–∞–Ω–∏–µ: {job['description'].strip()[:100]}...")
        print()
        
        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞–∫–∞–Ω—Å–∏—é
        result = analyze_job(job['description'])
        results.append({
            "job": job['name'],
            "analysis": result
        })
        
        # –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        print(f"\nüéØ –û–¶–ï–ù–ö–ê: {result['score']}/10")
        print(f"üí° –û–ë–û–°–ù–û–í–ê–ù–ò–ï: {result['reasoning']}")
        print(f"‚úâÔ∏è –û–¢–ö–õ–ò–ö:\n   {result['bid_draft']}")
        print()
    
    # –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞
    print("\n" + "="*60)
    print("üìä –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê")
    print("="*60)
    print(f"{'–í–∞–∫–∞–Ω—Å–∏—è':<30} {'–û—Ü–µ–Ω–∫–∞':<10}")
    print("-"*60)
    
    for r in results:
        print(f"{r['job']:<30} {r['analysis']['score']}/10")
    
    print("="*60)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    with open("analysis_results.json", "w", encoding="utf-8") as f:
        json.dump(results, f, ensure_ascii=False, indent=2)
    
    print("\nüíæ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: analysis_results.json")
    print("‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!\n")


if __name__ == "__main__":
    run_tests()
